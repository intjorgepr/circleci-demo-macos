version: 2.1
orbs:
  slack-notifier: martyzz1/slack-notifier@4.2.0

jobs:
  build-and-test:
    macos:
      xcode: 13.4.1
    steps:
      - run:
          name: List Directories
          command: ls
      - run:
          name: Force fail
          command: |
            #!/usr/bin/env bash

            exit 1


workflows:
  build-and-notify:
    jobs:
      - build-and-test
      - slack-notifier/slack-workflow-monitor:
          requires: 
            - build-and-test
          context: slack-notifications
          giphy-failure-keyword: broken
          giphy-success-keyword: party
          workflow-name: build-and-notify